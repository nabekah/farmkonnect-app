{
  "query": "\n-- Workers table\nCREATE TABLE IF NOT EXISTS workers (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  farmId INT NOT NULL,\n  userId INT,\n  name VARCHAR(255) NOT NULL,\n  email VARCHAR(255),\n  phone VARCHAR(20),\n  position VARCHAR(100) NOT NULL,\n  department VARCHAR(100),\n  hireDate DATE NOT NULL,\n  baseSalary DECIMAL(12, 2) NOT NULL,\n  salaryFrequency ENUM('daily', 'weekly', 'monthly') DEFAULT 'monthly',\n  employmentType ENUM('permanent', 'contract', 'seasonal', 'casual') DEFAULT 'permanent',\n  status ENUM('active', 'inactive', 'on_leave', 'terminated') DEFAULT 'active',\n  bankAccount VARCHAR(50),\n  bankName VARCHAR(100),\n  accountHolder VARCHAR(255),\n  emergencyContact VARCHAR(255),\n  emergencyPhone VARCHAR(20),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Attendance records table\nCREATE TABLE IF NOT EXISTS attendance_records (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  workerId INT NOT NULL,\n  farmId INT NOT NULL,\n  clockInTime DATETIME,\n  clockOutTime DATETIME,\n  attendanceDate DATE NOT NULL,\n  hoursWorked DECIMAL(5, 2),\n  status ENUM('present', 'absent', 'late', 'half_day', 'leave') DEFAULT 'present',\n  leaveType VARCHAR(50),\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (workerId) REFERENCES workers(id),\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Payroll periods table\nCREATE TABLE IF NOT EXISTS payroll_periods (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  farmId INT NOT NULL,\n  periodName VARCHAR(100) NOT NULL,\n  startDate DATE NOT NULL,\n  endDate DATE NOT NULL,\n  paymentDate DATE,\n  status ENUM('draft', 'processing', 'completed', 'paid') DEFAULT 'draft',\n  totalGrossPay DECIMAL(15, 2),\n  totalDeductions DECIMAL(15, 2),\n  totalNetPay DECIMAL(15, 2),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Payroll calculations table\nCREATE TABLE IF NOT EXISTS payroll_calculations (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  payrollPeriodId INT NOT NULL,\n  workerId INT NOT NULL,\n  farmId INT NOT NULL,\n  baseSalary DECIMAL(12, 2) NOT NULL,\n  daysWorked INT,\n  hoursWorked DECIMAL(8, 2),\n  overtimeHours DECIMAL(8, 2) DEFAULT 0,\n  overtimePay DECIMAL(12, 2) DEFAULT 0,\n  bonusAmount DECIMAL(12, 2) DEFAULT 0,\n  grossPay DECIMAL(15, 2) NOT NULL,\n  ssnitEmployee DECIMAL(12, 2) DEFAULT 0,\n  ssnitEmployer DECIMAL(12, 2) DEFAULT 0,\n  incomeTax DECIMAL(12, 2) DEFAULT 0,\n  healthInsurance DECIMAL(12, 2) DEFAULT 0,\n  otherDeductions DECIMAL(12, 2) DEFAULT 0,\n  totalDeductions DECIMAL(15, 2) NOT NULL,\n  netPay DECIMAL(15, 2) NOT NULL,\n  paymentStatus ENUM('pending', 'processed', 'paid', 'failed') DEFAULT 'pending',\n  paymentDate DATE,\n  paymentMethod VARCHAR(50),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (payrollPeriodId) REFERENCES payroll_periods(id),\n  FOREIGN KEY (workerId) REFERENCES workers(id),\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Deductions and benefits table\nCREATE TABLE IF NOT EXISTS deductions_benefits (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  workerId INT NOT NULL,\n  farmId INT NOT NULL,\n  deductionType ENUM('ssnit', 'income_tax', 'health_insurance', 'loan', 'advance', 'other') NOT NULL,\n  amount DECIMAL(12, 2) NOT NULL,\n  frequency ENUM('one_time', 'monthly', 'per_payroll') DEFAULT 'monthly',\n  startDate DATE,\n  endDate DATE,\n  reason VARCHAR(255),\n  status ENUM('active', 'inactive', 'completed') DEFAULT 'active',\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (workerId) REFERENCES workers(id),\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Payment history table\nCREATE TABLE IF NOT EXISTS payment_history (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  payrollCalculationId INT NOT NULL,\n  workerId INT NOT NULL,\n  farmId INT NOT NULL,\n  paymentAmount DECIMAL(15, 2) NOT NULL,\n  paymentDate DATE NOT NULL,\n  paymentMethod ENUM('bank_transfer', 'cash', 'mobile_money', 'check') DEFAULT 'bank_transfer',\n  transactionId VARCHAR(100),\n  status ENUM('pending', 'completed', 'failed', 'reversed') DEFAULT 'pending',\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (payrollCalculationId) REFERENCES payroll_calculations(id),\n  FOREIGN KEY (workerId) REFERENCES workers(id),\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Payroll reports table\nCREATE TABLE IF NOT EXISTS payroll_reports (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  farmId INT NOT NULL,\n  payrollPeriodId INT NOT NULL,\n  reportType ENUM('monthly_summary', 'tax_summary', 'ssnit_summary', 'payment_summary', 'compliance_report') NOT NULL,\n  reportData JSON,\n  totalEmployees INT,\n  totalGrossPay DECIMAL(15, 2),\n  totalDeductions DECIMAL(15, 2),\n  totalNetPay DECIMAL(15, 2),\n  totalSsnitEmployee DECIMAL(15, 2),\n  totalSsnitEmployer DECIMAL(15, 2),\n  totalIncomeTax DECIMAL(15, 2),\n  generatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (farmId) REFERENCES farms(id),\n  FOREIGN KEY (payrollPeriodId) REFERENCES payroll_periods(id)\n);\n\n-- Tax configuration table (Ghana-specific)\nCREATE TABLE IF NOT EXISTS tax_configuration (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  farmId INT NOT NULL,\n  taxYear INT NOT NULL,\n  ssnitEmployeeRate DECIMAL(5, 2) DEFAULT 5.5,\n  ssnitEmployerRate DECIMAL(5, 2) DEFAULT 13.5,\n  incomeTaxThreshold DECIMAL(12, 2) DEFAULT 0,\n  incomeTaxRate1 DECIMAL(5, 2) DEFAULT 5,\n  incomeTaxRate2 DECIMAL(5, 2) DEFAULT 10,\n  incomeTaxRate3 DECIMAL(5, 2) DEFAULT 17.5,\n  incomeTaxRate4 DECIMAL(5, 2) DEFAULT 25,\n  healthInsuranceRate DECIMAL(5, 2) DEFAULT 2.5,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway03.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 2kNF22PapS9mysw.root --database WZQk4bD8DnsRHwYBkmh7FN --execute \n-- Workers table\nCREATE TABLE IF NOT EXISTS workers (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  farmId INT NOT NULL,\n  userId INT,\n  name VARCHAR(255) NOT NULL,\n  email VARCHAR(255),\n  phone VARCHAR(20),\n  position VARCHAR(100) NOT NULL,\n  department VARCHAR(100),\n  hireDate DATE NOT NULL,\n  baseSalary DECIMAL(12, 2) NOT NULL,\n  salaryFrequency ENUM('daily', 'weekly', 'monthly') DEFAULT 'monthly',\n  employmentType ENUM('permanent', 'contract', 'seasonal', 'casual') DEFAULT 'permanent',\n  status ENUM('active', 'inactive', 'on_leave', 'terminated') DEFAULT 'active',\n  bankAccount VARCHAR(50),\n  bankName VARCHAR(100),\n  accountHolder VARCHAR(255),\n  emergencyContact VARCHAR(255),\n  emergencyPhone VARCHAR(20),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP\n);\n\n-- Attendance records table\nCREATE TABLE IF NOT EXISTS attendance_records (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  workerId INT NOT NULL,\n  farmId INT NOT NULL,\n  clockInTime DATETIME,\n  clockOutTime DATETIME,\n  attendanceDate DATE NOT NULL,\n  hoursWorked DECIMAL(5, 2),\n  status ENUM('present', 'absent', 'late', 'half_day', 'leave') DEFAULT 'present',\n  leaveType VARCHAR(50),\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (workerId) REFERENCES workers(id),\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Payroll periods table\nCREATE TABLE IF NOT EXISTS payroll_periods (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  farmId INT NOT NULL,\n  periodName VARCHAR(100) NOT NULL,\n  startDate DATE NOT NULL,\n  endDate DATE NOT NULL,\n  paymentDate DATE,\n  status ENUM('draft', 'processing', 'completed', 'paid') DEFAULT 'draft',\n  totalGrossPay DECIMAL(15, 2),\n  totalDeductions DECIMAL(15, 2),\n  totalNetPay DECIMAL(15, 2),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Payroll calculations table\nCREATE TABLE IF NOT EXISTS payroll_calculations (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  payrollPeriodId INT NOT NULL,\n  workerId INT NOT NULL,\n  farmId INT NOT NULL,\n  baseSalary DECIMAL(12, 2) NOT NULL,\n  daysWorked INT,\n  hoursWorked DECIMAL(8, 2),\n  overtimeHours DECIMAL(8, 2) DEFAULT 0,\n  overtimePay DECIMAL(12, 2) DEFAULT 0,\n  bonusAmount DECIMAL(12, 2) DEFAULT 0,\n  grossPay DECIMAL(15, 2) NOT NULL,\n  ssnitEmployee DECIMAL(12, 2) DEFAULT 0,\n  ssnitEmployer DECIMAL(12, 2) DEFAULT 0,\n  incomeTax DECIMAL(12, 2) DEFAULT 0,\n  healthInsurance DECIMAL(12, 2) DEFAULT 0,\n  otherDeductions DECIMAL(12, 2) DEFAULT 0,\n  totalDeductions DECIMAL(15, 2) NOT NULL,\n  netPay DECIMAL(15, 2) NOT NULL,\n  paymentStatus ENUM('pending', 'processed', 'paid', 'failed') DEFAULT 'pending',\n  paymentDate DATE,\n  paymentMethod VARCHAR(50),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (payrollPeriodId) REFERENCES payroll_periods(id),\n  FOREIGN KEY (workerId) REFERENCES workers(id),\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Deductions and benefits table\nCREATE TABLE IF NOT EXISTS deductions_benefits (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  workerId INT NOT NULL,\n  farmId INT NOT NULL,\n  deductionType ENUM('ssnit', 'income_tax', 'health_insurance', 'loan', 'advance', 'other') NOT NULL,\n  amount DECIMAL(12, 2) NOT NULL,\n  frequency ENUM('one_time', 'monthly', 'per_payroll') DEFAULT 'monthly',\n  startDate DATE,\n  endDate DATE,\n  reason VARCHAR(255),\n  status ENUM('active', 'inactive', 'completed') DEFAULT 'active',\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (workerId) REFERENCES workers(id),\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Payment history table\nCREATE TABLE IF NOT EXISTS payment_history (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  payrollCalculationId INT NOT NULL,\n  workerId INT NOT NULL,\n  farmId INT NOT NULL,\n  paymentAmount DECIMAL(15, 2) NOT NULL,\n  paymentDate DATE NOT NULL,\n  paymentMethod ENUM('bank_transfer', 'cash', 'mobile_money', 'check') DEFAULT 'bank_transfer',\n  transactionId VARCHAR(100),\n  status ENUM('pending', 'completed', 'failed', 'reversed') DEFAULT 'pending',\n  notes TEXT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (payrollCalculationId) REFERENCES payroll_calculations(id),\n  FOREIGN KEY (workerId) REFERENCES workers(id),\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n\n-- Payroll reports table\nCREATE TABLE IF NOT EXISTS payroll_reports (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  farmId INT NOT NULL,\n  payrollPeriodId INT NOT NULL,\n  reportType ENUM('monthly_summary', 'tax_summary', 'ssnit_summary', 'payment_summary', 'compliance_report') NOT NULL,\n  reportData JSON,\n  totalEmployees INT,\n  totalGrossPay DECIMAL(15, 2),\n  totalDeductions DECIMAL(15, 2),\n  totalNetPay DECIMAL(15, 2),\n  totalSsnitEmployee DECIMAL(15, 2),\n  totalSsnitEmployer DECIMAL(15, 2),\n  totalIncomeTax DECIMAL(15, 2),\n  generatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (farmId) REFERENCES farms(id),\n  FOREIGN KEY (payrollPeriodId) REFERENCES payroll_periods(id)\n);\n\n-- Tax configuration table (Ghana-specific)\nCREATE TABLE IF NOT EXISTS tax_configuration (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  farmId INT NOT NULL,\n  taxYear INT NOT NULL,\n  ssnitEmployeeRate DECIMAL(5, 2) DEFAULT 5.5,\n  ssnitEmployerRate DECIMAL(5, 2) DEFAULT 13.5,\n  incomeTaxThreshold DECIMAL(12, 2) DEFAULT 0,\n  incomeTaxRate1 DECIMAL(5, 2) DEFAULT 5,\n  incomeTaxRate2 DECIMAL(5, 2) DEFAULT 10,\n  incomeTaxRate3 DECIMAL(5, 2) DEFAULT 17.5,\n  incomeTaxRate4 DECIMAL(5, 2) DEFAULT 25,\n  healthInsuranceRate DECIMAL(5, 2) DEFAULT 2.5,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (farmId) REFERENCES farms(id)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2760
}